pipeline {
   agent any
    stages {
        stage('build image') {
            steps {
                script{
                      sh "docker build -t nginx-image:1 ."
                }
            }
        }
        stage('run docker container') {
            steps {
                script{
                    sh "docker run -d -p 80:80 nginx-image:1"
                    }
                }
            }
        }
    post
    {
        always
        {
            sh "docker rmi nginx-image | true"
        }
    }
}

